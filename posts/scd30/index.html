<!DOCTYPE html><html><head><meta charSet="utf-8" data-next-head=""/><meta name="viewport" content="width=device-width" data-next-head=""/><link rel="preload" href="/_next/static/css/87a293cf6330376c.css" as="style"/><link rel="preload" href="/_next/static/css/cfb18acb3accb3c3.css" as="style"/><link rel="preload" href="/_next/static/css/b60f922a2080d5f8.css" as="style"/><link rel="stylesheet" href="/_next/static/css/87a293cf6330376c.css" data-n-g=""/><link rel="stylesheet" href="/_next/static/css/cfb18acb3accb3c3.css" data-n-p=""/><link rel="stylesheet" href="/_next/static/css/b60f922a2080d5f8.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" noModule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-1ef8cb6f6a7ce2b8.js" defer=""></script><script src="/_next/static/chunks/framework-cd8d5624c33da33d.js" defer=""></script><script src="/_next/static/chunks/main-83f5b864e92932d1.js" defer=""></script><script src="/_next/static/chunks/pages/_app-c332b0946bb58586.js" defer=""></script><script src="/_next/static/chunks/921-fb5115e49abbc6d5.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bpath%5D-738984d015f6fac0.js" defer=""></script><script src="/_next/static/QnXZmrn34xJhQgSbtKvIE/_buildManifest.js" defer=""></script><script src="/_next/static/QnXZmrn34xJhQgSbtKvIE/_ssgManifest.js" defer=""></script></head><body><div id="__next"><main><header class="header container mb-5"><ul><li><a class="no-decoration link-hover" href="/">Sven Glinz </a></li><li><a class="no-decoration link-hover" href="/blog/">Blog</a></li><li><a class="no-decoration link-hover" href="/cv/">CV</a></li></ul><ul><img alt="" loading="lazy" width="800" height="800" decoding="async" data-nimg="1" class="toggle-icon" style="color:transparent" src="/_next/static/media/sun.bcda5c5e.svg"/></ul></header><div class="main container"><div class="post-content w-100 pb-5"><h3>Measuring Temperature and CO2 with Sensirion SCD30</h3>
<br/>

<blockquote>
<p>This post descibes how to set up the Sensirion SCD30 with a Raspberry Pi Zero and serve its
measurements within your home network</p></blockquote>
<p><b>Things you will need for this setup:</b>
<br></p><ol>
<li>Sensirion SCD30 (eg. from <a href="https://www.digikey.ch/en/products/detail/sensirion-ag/SCD30/8445334">digikey</a>)</li>
<li>Raspberry Pi (any except Pico) (eg. Raspberry Pi Zero from <a href="https://www.digikey.ch/en/products/detail/raspberry-pi/SC0065/18881027">digikey</a>)</li>
<li>Header Pins for the SCD30 (eg. from <a href="https://www.digikey.ch/en/products/detail/harwin-inc/D01-9922046/3727867">digkey</a>)</li>
<li>Jumper Wires (eg. from <a href="https://www.digikey.ch/en/products/detail/sparkfun-electronics/PRT-12796/5993861">digikey</a>)</li>
</ol>
<p>First, you will have to solder the header pins on the SCD30 board, such that you can connect it to your Raspberry.
Of course, you could also solder a wire directly to the sensor and connect it with the Raspberry. But assuming that
you want flexibility in what device you want to connect your sensor to, the approach via pins and jumper cable is probably
the easiest.</p><br>
To connect the sensor to the Raspberry via the I2C interface, you will have to connect the SCL, SDA and VDD pins to
the Raspberry Pi's SCL, SDA and 3.3V pins.

<br>
<br>
<div style="text-align: center;">
<img src="scd30_pin.png" style="width: 85%; margin: auto; align-self: center" alt="">
</div>

<br>
<br>

<p>The pin layout for the Raspberry Pi Zero can be found eg [here](https://www.pi4j.com/1.2/pins/model-zerow-rev1.html)</p><p>Once your sensor is connected to the power pin the XX should start blinking.</p><p>To check if the sensor is properly connected to the I2C interface, first enable I2C on your Raspberry via</p><pre class="language-bash"><code class="language-bash"><span class="token function">sudo</span> raspi-config
<span class="token comment"># 3: Interface options -> I5 I2C</span></code></pre><p>Then install `i2c-tools` to check if the sensor is properly connected</p><pre class="language-bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> i2c-tools
i2cdetect <span class="token parameter variable">-y</span> <span class="token number">1</span></code></pre><p>This should show that you have device 0x61 connected.</p><p>Now you are ready to send commands to the sensor and read from it via the I2C Interface.
The available commands are listed in [Sensirion's Interface Description](https://sensirion.com/media/documents/D7CEEF4A/6165372F/Sensirion_CO2_Sensors_SCD30_Interface_Description.pdf)</p><br>

<p>On my github, you will find a preconfigured C library that includes most of the important interface functions
to start communicating with the sensor right away.</p><p>Simply include the `scd30` header file in your code and connect to the sensor.</p><br>

<pre class="language-c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"scd30.h"</span></span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">scd30_init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">struct</span> <span class="token class-name">scd30_data</span> data<span class="token punctuation">;</span>

<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">scd30_get_data_ready_status</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token function">usleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">scd30_read_measurement</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token function">printf</span><span class="token punctuation">(</span>"C02 is<span class="token operator">:</span> <span class="token operator">%</span>f\n<span class="token punctuation">,</span> data<span class="token punctuation">.</span>co2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span>"Temp is<span class="token operator">:</span> <span class="token operator">%</span>f\n<span class="token punctuation">,</span> data<span class="token punctuation">.</span>temp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span>"Humidity is<span class="token operator">:</span> <span class="token operator">%</span>d\n<span class="token punctuation">,</span> data<span class="token punctuation">.</span>humidity<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>If you would like to query your data from ...
Webserver...</p><div style="text-align: center">
<img src="temp_monitor.png" style="width: 85%; margin: auto; align-self: center" alt="">
</div>
</div></div><footer class="footer container"><p>Â© Sven Glinz, 2024</p></footer></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":"\u003ch3\u003eMeasuring Temperature and CO2 with Sensirion SCD30\u003c/h3\u003e\n\u003cbr/\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003eThis post descibes how to set up the Sensirion SCD30 with a Raspberry Pi Zero and serve its\nmeasurements within your home network\u003c/p\u003e\u003c/blockquote\u003e\n\u003cp\u003e\u003cb\u003eThings you will need for this setup:\u003c/b\u003e\n\u003cbr\u003e\u003c/p\u003e\u003col\u003e\n\u003cli\u003eSensirion SCD30 (eg. from \u003ca href=\"https://www.digikey.ch/en/products/detail/sensirion-ag/SCD30/8445334\"\u003edigikey\u003c/a\u003e)\u003c/li\u003e\n\u003cli\u003eRaspberry Pi (any except Pico) (eg. Raspberry Pi Zero from \u003ca href=\"https://www.digikey.ch/en/products/detail/raspberry-pi/SC0065/18881027\"\u003edigikey\u003c/a\u003e)\u003c/li\u003e\n\u003cli\u003eHeader Pins for the SCD30 (eg. from \u003ca href=\"https://www.digikey.ch/en/products/detail/harwin-inc/D01-9922046/3727867\"\u003edigkey\u003c/a\u003e)\u003c/li\u003e\n\u003cli\u003eJumper Wires (eg. from \u003ca href=\"https://www.digikey.ch/en/products/detail/sparkfun-electronics/PRT-12796/5993861\"\u003edigikey\u003c/a\u003e)\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eFirst, you will have to solder the header pins on the SCD30 board, such that you can connect it to your Raspberry.\nOf course, you could also solder a wire directly to the sensor and connect it with the Raspberry. But assuming that\nyou want flexibility in what device you want to connect your sensor to, the approach via pins and jumper cable is probably\nthe easiest.\u003c/p\u003e\u003cbr\u003e\nTo connect the sensor to the Raspberry via the I2C interface, you will have to connect the SCL, SDA and VDD pins to\nthe Raspberry Pi's SCL, SDA and 3.3V pins.\n\n\u003cbr\u003e\n\u003cbr\u003e\n\u003cdiv style=\"text-align: center;\"\u003e\n\u003cimg src=\"scd30_pin.png\" style=\"width: 85%; margin: auto; align-self: center\" alt=\"\"\u003e\n\u003c/div\u003e\n\n\u003cbr\u003e\n\u003cbr\u003e\n\n\u003cp\u003eThe pin layout for the Raspberry Pi Zero can be found eg [here](https://www.pi4j.com/1.2/pins/model-zerow-rev1.html)\u003c/p\u003e\u003cp\u003eOnce your sensor is connected to the power pin the XX should start blinking.\u003c/p\u003e\u003cp\u003eTo check if the sensor is properly connected to the I2C interface, first enable I2C on your Raspberry via\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-bash\"\u003esudo raspi-config\n# 3: Interface options -\u003e I5 I2C\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThen install `i2c-tools` to check if the sensor is properly connected\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-bash\"\u003esudo apt install i2c-tools\ni2cdetect -y 1\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThis should show that you have device 0x61 connected.\u003c/p\u003e\u003cp\u003eNow you are ready to send commands to the sensor and read from it via the I2C Interface.\nThe available commands are listed in [Sensirion's Interface Description](https://sensirion.com/media/documents/D7CEEF4A/6165372F/Sensirion_CO2_Sensors_SCD30_Interface_Description.pdf)\u003c/p\u003e\u003cbr\u003e\n\n\u003cp\u003eOn my github, you will find a preconfigured C library that includes most of the important interface functions\nto start communicating with the sensor right away.\u003c/p\u003e\u003cp\u003eSimply include the `scd30` header file in your code and connect to the sensor.\u003c/p\u003e\u003cbr\u003e\n\n\u003cpre\u003e\u003ccode class=\"language-c\"\u003e#include \"scd30.h\"\n\nif (scd30_init() \u003c 0) exit(1);\nstruct scd30_data data;\n\nwhile (1) {\n    while (!scd30_get_data_ready_status()) usleep(1000);\n    scd30_read_measurement(\u0026data);\n    \n    printf(\"C02 is: %f\\n, data.co2);\n    printf(\"Temp is: %f\\n, data.temp);\n    printf(\"Humidity is: %d\\n, data.humidity);\n    \n    sleep(10);\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eIf you would like to query your data from ...\nWebserver...\u003c/p\u003e\u003cdiv style=\"text-align: center\"\u003e\n\u003cimg src=\"temp_monitor.png\" style=\"width: 85%; margin: auto; align-self: center\" alt=\"\"\u003e\n\u003c/div\u003e\n"},"__N_SSG":true},"page":"/posts/[path]","query":{"path":"scd30"},"buildId":"QnXZmrn34xJhQgSbtKvIE","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>